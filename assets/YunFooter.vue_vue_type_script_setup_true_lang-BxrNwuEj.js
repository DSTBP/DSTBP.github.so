var M=Object.defineProperty;var L=(t,e,i)=>e in t?M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var c=(t,e,i)=>L(t,typeof e!="symbol"?e+"":e,i);import{d as I,z as w,O as P,$ as z,j as E,L as V,A as D,o as d,e as v,q as x,r as R,g as n,t as o,f as r,ay as k,y as F,V as j,az as y,l as m,h as u,F as G,n as O,aA as W,c as Y,w as S,i as H}from"./app-BQ08RWyO.js";function ft(t,e){return Math.random()*(e-t)+t}function vt(t,e){let i,h=!1;return()=>{i&&clearTimeout(i),h?i=setTimeout(t,e):(t(),h=!0,setTimeout(()=>{h=!1},e))}}class q{constructor(e){c(this,"ENABLE",!1);c(this,"POINT_INTERVAL",5);c(this,"FISH_COUNT",3);c(this,"MAX_INTERVAL_COUNT",50);c(this,"INIT_HEIGHT_RATE",.5);c(this,"THRESHOLD",50);c(this,"COLOR","hsl(0, 0%, 95%)");this.ENABLE||(this.setColor(e),this.removeCanvas(),this.setParameters(),this.reconstructMethods(),this.setup(),this.bindEvent(),this.render(),this.ENABLE=!0)}removeCanvas(){const i=document.querySelector("#jsi-flying-fish-container").querySelector("canvas");i&&i.remove()}setColor(e){e&&(this.COLOR=e)}setParameters(){this.$window=$(window),this.$container=$("#jsi-flying-fish-container"),this.$canvas=$("<canvas />"),this.context=this.$canvas.appendTo(this.$container).get(0).getContext("2d"),this.points=[],this.fishes=[],this.watchIds=[]}createSurfacePoints(){const e=Math.round(this.width/this.POINT_INTERVAL);this.pointInterval=this.width/(e-1),this.points.push(new A(this,0));for(let i=1;i<e;i++){const h=new A(this,i*this.pointInterval),s=this.points[i-1];h.setPreviousPoint(s),s.setNextPoint(h),this.points.push(h)}}reconstructMethods(){this.watchWindowSize=this.watchWindowSize.bind(this),this.jdugeToStopResize=this.jdugeToStopResize.bind(this),this.startEpicenter=this.startEpicenter.bind(this),this.moveEpicenter=this.moveEpicenter.bind(this),this.reverseVertical=this.reverseVertical.bind(this),this.render=this.render.bind(this)}setup(){this.points.length=0,this.fishes.length=0,this.watchIds.length=0,this.intervalCount=this.MAX_INTERVAL_COUNT,this.width=this.$container.width(),this.height=this.$container.height(),this.fishCount=this.FISH_COUNT*this.width/500*this.height/500,this.$canvas.attr({width:this.width,height:this.height}),this.reverse=!1,this.fishes.push(new b(this)),this.createSurfacePoints()}watchWindowSize(){this.clearTimer(),this.tmpWidth=this.$window.width(),this.tmpHeight=this.$window.height(),this.watchIds.push(setTimeout(this.jdugeToStopResize,this.WATCH_INTERVAL))}clearTimer(){for(;this.watchIds.length>0;)clearTimeout(this.watchIds.pop())}jdugeToStopResize(){const e=this.$window.width(),i=this.$window.height(),h=e==this.tmpWidth&&i==this.tmpHeight;this.tmpWidth=e,this.tmpHeight=i,h&&this.setup()}bindEvent(){this.$window.on("resize",this.watchWindowSize),this.$container.on("mouseenter",this.startEpicenter),this.$container.on("mousemove",this.moveEpicenter)}getAxis(e){const i=this.$container.offset();return{x:e.clientX-i.left+this.$window.scrollLeft(),y:e.clientY-i.top+this.$window.scrollTop()}}startEpicenter(e){this.axis=this.getAxis(e)}moveEpicenter(e){const i=this.getAxis(e);this.axis||(this.axis=i),this.generateEpicenter(i.x,i.y,i.y-this.axis.y),this.axis=i}generateEpicenter(e,i,h){if(i<this.height/2-this.THRESHOLD||i>this.height/2+this.THRESHOLD)return;const s=Math.round(e/this.pointInterval);s<0||s>=this.points.length||this.points[s]&&this.points[s].interfere(i,h)}reverseVertical(){this.reverse=!this.reverse;for(let e=0,i=this.fishes.length;e<i;e++)this.fishes[e].reverseVertical()}controlStatus(){for(let e=0,i=this.points.length;e<i;e++)this.points[e].updateSelf();for(let e=0,i=this.points.length;e<i;e++)this.points[e].updateNeighbors();this.fishes.length<this.fishCount&&--this.intervalCount==0&&(this.intervalCount=this.MAX_INTERVAL_COUNT,this.fishes.push(new b(this)))}render(){requestAnimationFrame(this.render),this.controlStatus(),this.context.clearRect(0,0,this.width,this.height),this.context.fillStyle=this.COLOR;for(let e=0,i=this.fishes.length;e<i;e++)this.fishes[e].render(this.context);this.context.save(),this.context.globalCompositeOperation="xor",this.context.beginPath(),this.context.moveTo(0,this.reverse?0:this.height);for(let e=0,i=this.points.length;e<i;e++)this.points[e].render(this.context);this.context.lineTo(this.width,this.reverse?0:this.height),this.context.closePath(),this.context.fill(),this.context.restore()}}const A=function(t,e){this.renderer=t,this.x=e,this.init()};A.prototype={SPRING_CONSTANT:.03,SPRING_FRICTION:.9,WAVE_SPREAD:.3,ACCELARATION_RATE:.01,init(){this.initHeight=this.renderer.height*this.renderer.INIT_HEIGHT_RATE,this.height=this.initHeight,this.fy=0,this.force={previous:0,next:0}},setPreviousPoint(t){this.previous=t},setNextPoint(t){this.next=t},interfere(t,e){this.fy=this.renderer.height*this.ACCELARATION_RATE*(this.renderer.height-this.height-t>=0?-1:1)*Math.abs(e)},updateSelf(){this.fy+=this.SPRING_CONSTANT*(this.initHeight-this.height),this.fy*=this.SPRING_FRICTION,this.height+=this.fy},updateNeighbors(){this.previous&&(this.force.previous=this.WAVE_SPREAD*(this.height-this.previous.height)),this.next&&(this.force.next=this.WAVE_SPREAD*(this.height-this.next.height))},render(t){this.previous&&(this.previous.height+=this.force.previous,this.previous.fy+=this.force.previous),this.next&&(this.next.height+=this.force.next,this.next.fy+=this.force.next),t.lineTo(this.x,this.renderer.height-this.height)}};const b=function(t){this.renderer=t,this.init()};b.prototype={GRAVITY:.4,init(){this.direction=Math.random()<.5,this.x=this.direction?this.renderer.width+this.renderer.THRESHOLD:-this.renderer.THRESHOLD,this.previousY=this.y,this.vx=this.getRandomValue(4,7)*(this.direction?-1:1),this.renderer.reverse?(this.y=this.getRandomValue(this.renderer.height*1/10,this.renderer.height*4/10),this.vy=this.getRandomValue(2,5),this.ay=this.getRandomValue(.05,.2)):(this.y=this.getRandomValue(this.renderer.height*6/10,this.renderer.height*9/10),this.vy=this.getRandomValue(-5,-2),this.ay=this.getRandomValue(-.2,-.05)),this.isOut=!1,this.theta=0,this.phi=0},getRandomValue(t,e){return t+(e-t)*Math.random()},reverseVertical(){this.isOut=!this.isOut,this.ay*=-1},controlStatus(){this.previousY=this.y,this.x+=this.vx,this.y+=this.vy,this.vy+=this.ay,this.renderer.reverse?this.y>this.renderer.height*this.renderer.INIT_HEIGHT_RATE?(this.vy-=this.GRAVITY,this.isOut=!0):(this.isOut&&(this.ay=this.getRandomValue(.05,.2)),this.isOut=!1):this.y<this.renderer.height*this.renderer.INIT_HEIGHT_RATE?(this.vy+=this.GRAVITY,this.isOut=!0):(this.isOut&&(this.ay=this.getRandomValue(-.2,-.05)),this.isOut=!1),this.isOut||(this.theta+=Math.PI/20,this.theta%=Math.PI*2,this.phi+=Math.PI/30,this.phi%=Math.PI*2),this.renderer.generateEpicenter(this.x+(this.direction?-1:1)*this.renderer.THRESHOLD,this.y,this.y-this.previousY),(this.vx>0&&this.x>this.renderer.width+this.renderer.THRESHOLD||this.vx<0&&this.x<-this.renderer.THRESHOLD)&&this.init()},render(t){t.save(),t.translate(this.x,this.y),t.rotate(Math.PI+Math.atan2(this.vy,this.vx)),t.scale(1,this.direction?1:-1),t.beginPath(),t.moveTo(-30,0),t.bezierCurveTo(-20,15,15,10,40,0),t.bezierCurveTo(15,-10,-20,-15,-30,0),t.fill(),t.save(),t.translate(40,0),t.scale(.9+.2*Math.sin(this.theta),1),t.beginPath(),t.moveTo(0,0),t.quadraticCurveTo(5,10,20,8),t.quadraticCurveTo(12,5,10,0),t.quadraticCurveTo(12,-5,20,-8),t.quadraticCurveTo(5,-10,0,0),t.fill(),t.restore(),t.save(),t.translate(-3,0),t.rotate((Math.PI/3+Math.PI/10*Math.sin(this.phi))*(this.renderer.reverse?-1:1)),t.beginPath(),this.renderer.reverse?(t.moveTo(5,0),t.bezierCurveTo(10,10,10,30,0,40),t.bezierCurveTo(-12,25,-8,10,0,0)):(t.moveTo(-5,0),t.bezierCurveTo(-10,-10,-10,-30,0,-40),t.bezierCurveTo(12,-25,8,-10,0,0)),t.closePath(),t.fill(),t.restore(),t.restore(),this.controlStatus(t)}};const B=I({__name:"FooterFish",setup(t){const e=w(),i=P("https://cdn.bootcdn.net/ajax/libs/zepto/1.2.0/zepto.min.js"),h=z(),s=E(()=>h.isDark);let a;function p(){const f=s.value?"hsl(0, 0%, 95%)":"hsl(0, 0%, 80%)";a?a.setColor(f):a=new q(f)}return V(()=>{i.load().then(p)}),D(s,p),(f,l)=>(d(),v("div",{id:"jsi-flying-fish-container",ref_key:"fishContainer",ref:e,class:"z-1 relative",style:{"margin-top":"-60px"}},null,512))}}),U={class:"vc-site-live-time"},X={"mx-1":""},J={"mx-1":""},K={"mx-1":""},Q={"mx-1":""},Z=I({__name:"VCLiveTime",props:{startTime:{}},setup(t){const e=t,{t:i}=x(),h=w(0),s=w(0),a=w(0),p=w(0);function f(){const l=new Date(e.startTime),g=new Date().getTime()-l.getTime(),_=60*1e3,T=60*_,N=24*T;h.value=Math.floor(g/N),s.value=Math.floor(g%N/60/60/1e3),a.value=Math.floor(g%T/60/1e3),p.value=Math.floor(g%_/1e3)}return V(()=>{setInterval(f,1e3)}),(l,C)=>(d(),v("div",U,[R(l.$slots,"live-time-before"),n("span",X,o(r(i)("time.day",h.value)),1),n("span",J,o(r(i)("time.hour",s.value)),1),n("span",K,o(r(i)("time.minute",a.value)),1),n("span",Q,o(r(i)("time.second",p.value)),1),R(l.$slots,"live-time-after")]))}}),tt={class:"va-footer p-4 text-$va-c-text-light",text:"center sm"},et={key:0,class:"beian",m:"y-2"},it={href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener"},st={class:"copyright flex justify-center items-center gap-2",p:"1"},ht=["href","title"],rt={key:1,class:"powered",m:"2"},nt=["innerHTML"],ot=["href","title"],at=I({__name:"YunFooter",setup(t){const{t:e}=x(),i=k(),h=F(),s=j(),a=new Date().getFullYear(),p=E(()=>a===s.value.footer.since),f=E(()=>e("footer.powered",[`<a href="${y.repository.url}" target="_blank" rel="noopener">Valaxy</a> v${y.version}`])),l=E(()=>s.value.footer.icon||{url:y.repository.url,name:"i-ri-cloud-line",title:y.name});return(C,g)=>{var _,T;return d(),v("footer",tt,[(_=r(s).footer.beian)!=null&&_.enable&&r(s).footer.beian.icp?(d(),v("div",et,[n("a",it,o(r(s).footer.beian.icp),1)])):m("v-if",!0),n("div",st,[n("span",null,[u(" © "),p.value?m("v-if",!0):(d(),v(G,{key:0},[u(o(r(s).footer.since)+" - ",1)],64)),u(" "+o(r(a)),1)]),(T=r(s).footer.icon)!=null&&T.enable?(d(),v("a",{key:0,class:O(["inline-flex",r(s).footer.icon.animated?"animate-pulse":""]),href:l.value.url,target:"_blank",title:l.value.title},[n("div",{class:O(l.value.name)},null,2)],10,ht)):m("v-if",!0),n("span",null,o(r(h).author.name),1)]),r(s).footer.powered?(d(),v("div",rt,[n("span",{innerHTML:f.value},null,8,nt),u(" | "),n("span",null,[u(o(r(e)("footer.theme"))+" - ",1),n("a",{href:r(s).pkg.repository.url,title:r(s).pkg.name,target:"_blank"},o(W(r(i).theme)),9,ot),u(" v"+o(r(s).pkg.version),1)])])):m("v-if",!0),R(C.$slots,"default")])}}}),lt=n("span",null,"本站已运行",-1),ut=n("span",null,null,-1),ct=n("div",null,[u("本站总访问量 "),n("span",{id:"busuanzi_value_site_pv"}),u(" 次 | 本站访客数 "),n("span",{id:"busuanzi_value_site_uv"}),u(" 人次")],-1),mt=I({__name:"YunFooter",setup(t){return P("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"),(e,i)=>{const h=Z,s=B;return d(),Y(at,null,{default:S(()=>[m(" 自定义页脚内容 "),H(h,{"start-time":"2023-12-21"},{"live-time-before":S(()=>[lt]),"live-time-after":S(()=>[ut,m(" 后缀 ")]),_:1}),ct,R(e.$slots,"default"),H(s)]),_:3})}}});export{mt as _,ft as r,vt as t};
